<div class="guitar-card" *ngIf="guitar">
  <div class="card-img">
    <img src="{{ guitar.images[0] }}"
         alt=""
         width="100px"
    >
  </div>

  <div class="availability-wrapper">
    <app-availability [guitar]="guitar"></app-availability>
  </div>

  <div class="about">
    <div class="top">
      Гитара {{ guitar.name }} {{ guitar.model }}
    </div>

    <p class="type">{{ guitar.type }}</p>

    <app-price [price]="guitar.price"
               [salePrice]="guitar.salePrice"
    ></app-price>

    <div class="reviews">
      <span
              *ngIf="guitar.reviews.length; else noReviews"
      >
        {{ guitar.reviews.length | countVal: 'Отзыв':'Отзыва':'Отзывов' }}
      </span>
      <ng-template #noReviews>
        <span class="no-reviews">Нету отзывов.</span>
      </ng-template>
    </div>

    <div class="actions">
      <button [routerLink]="['guitar', guitar.id]" class="btn btn-primary">Подробнее</button>

      <div class="basket-action" *ngIf="guitar.availability">
        <span class="basket"
              matTooltip="Добавить гитару в корзину."
              matTooltipPosition="above"
              (click)="addToBasket()"
              *ngIf="!isOnBasket(guitar.id); else boughtCase"
        >
        <svg viewBox="0 0 40 40">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 4.5C0.5 3.67157 1.17157 3 2 3H5.4264C7.29819 3 8.97453 4.15869 9.63602 5.9097L10.4264 8.00178C10.4503 8.00062 10.4745 8.00002 10.4987 8L34.0093 7.98001C37.2162 7.97728 39.3967 11.2342 38.1722 14.1982L34.3031 23.5639C33.8485 24.6643 32.8658 25.4581 31.6944 25.6711L18.7279 28.0286C16.5907 28.4172 14.481 27.2236 13.7133 25.1915L6.8296 6.9699C6.60911 6.38623 6.05033 6 5.4264 6H2C1.17157 6 0.5 5.32843 0.5 4.5ZM11.5587 10.9991L16.5197 24.1313C16.7756 24.8087 17.4789 25.2065 18.1913 25.077L31.1577 22.7195C31.3251 22.689 31.4655 22.5756 31.5304 22.4184L35.3995 13.0527C35.8077 12.0648 35.0809 10.9791 34.0119 10.98L11.5587 10.9991Z"></path>
            <circle cx="13.5" cy="34" r="3"></circle>
            <circle cx="31.5" cy="34" r="3"></circle>
        </svg>
      </span>
        <ng-template #boughtCase>
        <span class="basket"
              matTooltip="Гитара уже в корзине."
              (click)="openBasket()"
        >
          <svg viewBox="0 0 24 24">
              <g>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M1 2C0.447715 2 0 2.44772 0 3C0 3.55228 0.447715 4 1 4H2.68121C3.08124 4 3.44277 4.2384 3.60035 4.60608L8.44161 15.9023C9.00044 17.2063 10.3963 17.9405 11.7874 17.6623L19.058 16.2082C20.1137 15.9971 20.9753 15.2365 21.3157 14.2151L23.0712 8.94868C23.7187 7.00609 22.2728 5 20.2251 5H5.94511L5.43864 3.81824C4.96591 2.71519 3.88129 2 2.68121 2H1ZM10.2799 15.1145L6.80225 7H20.2251C20.9077 7 21.3897 7.6687 21.1738 8.31623L19.4183 13.5827C19.3049 13.9231 19.0177 14.1767 18.6658 14.247L11.3952 15.7012C10.9315 15.7939 10.4662 15.5492 10.2799 15.1145Z"></path>
                  <path d="M11 22C11 23.1046 10.1046 24 9 24C7.89543 24 7 23.1046 7 22C7 20.8954 7.89543 20 9 20C10.1046 20 11 20.8954 11 22Z"></path>
                  <path d="M21 22C21 23.1046 20.1046 24 19 24C17.8954 24 17 23.1046 17 22C17 20.8954 17.8954 20 19 20C20.1046 20 21 20.8954 21 22Z"></path>
              </g>

              <g>
                  <path d="M20 15L21 6H6L10 16L20 15Z"></path>
                  <circle cx="17" cy="7" r="7" fill="white"></circle>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M17 13C20.3137 13 23 10.3137 23 7C23 3.68629 20.3137 1 17 1C13.6863 1 11 3.68629 11 7C11 10.3137 13.6863 13 17 13ZM20.7071 5.70711C21.0976 5.31658 21.0976 4.68342 20.7071 4.29289C20.3166 3.90237 19.6834 3.90237 19.2929 4.29289L16 7.58579L14.7071 6.29289C14.3166 5.90237 13.6834 5.90237 13.2929 6.29289C12.9024 6.68342 12.9024 7.31658 13.2929 7.70711L15.2929 9.70711C15.6834 10.0976 16.3166 10.0976 16.7071 9.70711L20.7071 5.70711Z"></path>
              </g>
          </svg>
        </span>
        </ng-template>
      </div>
    </div>
  </div>
</div>
